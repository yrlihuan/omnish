# config/daemon.toml
# Daemon configuration — copy to ~/.omnish/daemon.toml

# Listen address:
#   Unix socket:  listen_addr = "~/.omnish/omnish.sock"   (default)
#   TCP:          listen_addr = "tcp://0.0.0.0:9500"

[llm]
default = "claude"

[llm.backends.claude]
backend_type = "anthropic"
model = "claude-sonnet-4-5-20250929"
api_key_cmd = "pass show anthropic/api-key"
# max_content_chars = 200000  # Optional: model-specific context limit

# [llm.backends.claude-haiku]
# backend_type = "anthropic"
# model = "claude-3-5-haiku-20240307"
# api_key_cmd = "pass show anthropic/api-key"
# max_content_chars = 150000  # Smaller context limit for haiku

# [llm.backends.openai]
# backend_type = "openai_compat"
# model = "gpt-4o"
# api_key_cmd = "pass show openai/api-key"
# base_url = "https://api.openai.com/v1"
# max_content_chars = 128000  # OpenAI context limit

# Map use cases to backend models
# Uncomment and modify to use different models for different tasks:
# [llm.use_cases]
# completion = "claude-haiku"  # Use faster/cheaper model for auto-completion
# analysis = "claude"          # Use smarter model for analysis/chat
# chat = "claude"             # Use smarter model for chat

[llm.auto_trigger]
on_nonzero_exit = true
on_stderr_patterns = ["error", "panic", "traceback", "fatal"]
cooldown_seconds = 5

[context.completion]
# detailed_commands = 30   # recent commands shown with full output
# history_commands = 500   # older commands listed as command-line only
# head_lines = 20          # output lines kept from start of each command
# tail_lines = 20          # output lines kept from end of each command
# max_context_chars = 8000 # fallback limit if backend doesn't specify max_content_chars

[context.hourly_summary]
# head_lines = 50         # output lines kept from start of each command (for hourly summary)
# tail_lines = 100        # output lines kept from end of each command (for hourly summary)
# max_line_width = 128   # max characters per line for hourly summary

[tasks.eviction]
# session_evict_hours = 48 # evict inactive sessions from memory after N hours

[tasks.daily_notes]
enabled = true
# schedule_hour = 23       # 每天几点生成日报 (0-23)，默认 23
